<!DOCTYPE html>
<html>
<head>
    <title>Seed Firebase Data</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <h1>Seeding Firebase Data for Sanj Healthcare...</h1>
    <div id="status" style="padding: 20px; font-family: Arial;"></div>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyARxCkcyB7ts0EWoq9x9G31xhIN6fpR9kk",
            authDomain: "sanj-healthcare-77e02.firebaseapp.com",
            projectId: "sanj-healthcare-77e02",
            storageBucket: "sanj-healthcare-77e02.firebasestorage.app",
            messagingSenderId: "710696156355",
            appId: "1:710696156355:web:13bcee177f46e3aebc7676",
            measurementId: "G-HDKXN3LZ7P"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const sampleData = {
            products: [
                {
                    id: 1,
                    name: "Calsanz Fem Capsule",
                    batch: "CF001",
                    expiry: "2026-12-31",
                    mrp: 500,
                    gst: 12,
                    retailerPrice: 400,
                    stockistPrice: 360,
                    supplierPrice: 300,
                    bonus: "10+1 strip",
                    stock: 200,
                    category: "Capsules",
                    description: "Calcium & Vitamin D capsule"
                },
                {
                    id: 2, 
                    name: "Calsanz Strong Capsule",
                    batch: "CS002",
                    expiry: "2026-12-31",
                    mrp: 600,
                    gst: 12,
                    retailerPrice: 480,
                    stockistPrice: 432,
                    supplierPrice: 400,
                    bonus: "10+3 strip",
                    stock: 150,
                    category: "Capsules",
                    description: "Strong Calcium & Vitamin D formulation"
                },
                {
                    id: 3,
                    name: "Rabsanz DSR Capsule",
                    batch: "RD003",
                    expiry: "2025-11-30",
                    mrp: 450,
                    gst: 12,
                    retailerPrice: 360,
                    stockistPrice: 324,
                    supplierPrice: 280,
                    bonus: "5+1 strip",
                    stock: 300,
                    category: "Capsules",
                    description: "Rabeprazole + Domperidone"
                }
            ],
            finance: [
                {
                    type: "Revenue",
                    amount: 50000,
                    category: "Product Sales",
                    date: "2024-01-15",
                    notes: "Monthly sales from distributors"
                },
                {
                    type: "Expense", 
                    amount: 15000,
                    category: "Office Rent",
                    date: "2024-01-05",
                    notes: "Monthly office rent payment"
                },
                {
                    type: "Revenue",
                    amount: 25000,
                    category: "Direct Sales",
                    date: "2024-01-20",
                    notes: "Hospital direct supply"
                }
            ],
            marketing: [
                {
                    doctorName: "Dr. Sharma",
                    targetValue: 100000,
                    completedValue: 75000,
                    initialPayment: 20000,
                    agreementDate: "2024-01-01",
                    notes: "Main hospital agreement - cardiology department"
                },
                {
                    doctorName: "Dr. Mehta",
                    targetValue: 80000,
                    completedValue: 45000,
                    initialPayment: 15000,
                    agreementDate: "2024-01-10",
                    notes: "Private clinic partnership"
                }
            ],
            stock: [
                {
                    productId: 1,
                    batch: "CF001",
                    quantity: 200,
                    invoice: "INV-001",
                    date: "2024-01-01"
                },
                {
                    productId: 2,
                    batch: "CS002", 
                    quantity: 150,
                    invoice: "INV-002",
                    date: "2024-01-05"
                }
            ],
            debts_bankLoans: [
                {
                    bankName: "HDFC Bank",
                    principal: 500000,
                    emi: 12500,
                    startDate: "2024-01-01",
                    remarks: "Business loan for expansion",
                    paid: 0
                }
            ],
            debts_investors: [
                {
                    investorName: "Mr. Agarwal",
                    principal: 200000,
                    roi: 1.5,
                    withdrawnPrincipal: 0,
                    startDate: "2024-01-01", 
                    remarks: "Silent partner investment",
                    skipROI: false
                }
            ]
        };

        async function seedData() {
            const status = document.getElementById('status');
            
            try {
                status.innerHTML += '<p>üì¶ Seeding products collection...</p>';
                for (const product of sampleData.products) {
                    await db.collection('products').doc(product.id.toString()).set(product);
                }
                
                status.innerHTML += '<p>üí∞ Seeding finance collection...</p>';
                for (const finance of sampleData.finance) {
                    await db.collection('finance').add({
                        ...finance,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                
                status.innerHTML += '<p>üë®‚Äç‚öïÔ∏è Seeding marketing collection...</p>';
                for (const marketing of sampleData.marketing) {
                    await db.collection('marketing').add({
                        ...marketing,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                
                status.innerHTML += '<p>üìä Seeding stock collection...</p>';
                for (const stock of sampleData.stock) {
                    await db.collection('stock').add({
                        ...stock,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                
                status.innerHTML += '<p>üè¶ Seeding bank loans...</p>';
                for (const loan of sampleData.debts_bankLoans) {
                    await db.collection('debts').doc('bankLoans').collection('entries').add({
                        ...loan,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                
                status.innerHTML += '<p>ü§µ Seeding investors...</p>';
                for (const investor of sampleData.debts_investors) {
                    await db.collection('debts').doc('investors').collection('entries').add({
                        ...investor,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                
                status.innerHTML += '<p style="color: green; font-weight: bold; font-size: 18px;">‚úÖ ALL DATA SEEDED SUCCESSFULLY! Your app should now work perfectly.</p>';
                status.innerHTML += '<p>Collections created: products, finance, marketing, stock, debts/bankLoans/entries, debts/investors/entries</p>';
                
            } catch (error) {
                status.innerHTML += `<p style="color: red; font-weight: bold;">‚ùå Error: ${error.message}</p>`;
                console.error('Seeding error:', error);
            }
        }

        // Run seeder when page loads
        seedData();
    </script>
</body>
</html>