<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanj Healthcare - Dashboard</title>
    
    <!-- Use basic Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Favicon as SVG -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè•</text></svg>">
</head>
<body class="bg-gray-50">
    <!-- App Container -->
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="w-64 bg-blue-800 text-white shadow-lg">
            <div class="p-6">
                <h1 class="text-2xl font-bold">Sanj Healthcare</h1>
                <p class="text-blue-200 text-sm mt-2">Business Management System</p>
            </div>
            
            <nav class="mt-8">
                <div class="px-4 space-y-2">
                    <a href="#" class="nav-link active" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt w-6"></i>
                        Dashboard
                    </a>
                    <a href="#" class="nav-link" data-tab="products">
                        <i class="fas fa-pills w-6"></i>
                        Products
                    </a>
                    <a href="#" class="nav-link" data-tab="stock">
                        <i class="fas fa-boxes w-6"></i>
                        Stock
                    </a>
                    <a href="#" class="nav-link" data-tab="customers">
                        <i class="fas fa-users w-6"></i>
                        Customers
                    </a>
                    <a href="#" class="nav-link" data-tab="finance">
                        <i class="fas fa-chart-line w-6"></i>
                        Finance
                    </a>
                    <a href="#" class="nav-link" data-tab="debts">
                        <i class="fas fa-hand-holding-usd w-6"></i>
                        Debts
                    </a>
                    <a href="#" class="nav-link" data-tab="marketing">
                        <i class="fas fa-handshake w-6"></i>
                        Marketing
                    </a>
                    <a href="#" class="nav-link" data-tab="reports">
                        <i class="fas fa-chart-bar w-6"></i>
                        Reports
                    </a>
                </div>
            </nav>
            
            <div class="absolute bottom-0 w-64 p-4 border-t border-blue-700">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-sm"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium truncate" id="user-email">user@example.com</p>
                        <button id="logout-btn" class="text-blue-200 text-xs hover:text-white">Logout</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white shadow-sm border-b">
                <div class="flex items-center justify-between px-6 py-4">
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800" id="current-tab-title">Dashboard</h2>
                        <p class="text-gray-600 text-sm">Welcome to Sanj Healthcare Management System</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-500" id="current-date"></span>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto p-6">
                <div id="content">
                    <!-- Dashboard Content -->
                    <div class="welcome-message">
                        <div class="bg-white rounded-lg shadow-sm border p-8 text-center">
                            <i class="fas fa-heartbeat text-6xl text-blue-600 mb-4"></i>
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">Welcome to Sanj Healthcare App</h2>
                            <p class="text-gray-600 text-lg mb-8">Select a tab from the sidebar to manage your healthcare business operations.</p>
                            
                            <div class="dashboard-stats grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-4xl mx-auto">
                                <div class="stat-card bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h3 class="text-lg font-semibold">Products</h3>
                                            <p class="text-3xl font-bold mt-2">0</p>
                                            <p class="text-blue-100 text-sm mt-1">Total Products</p>
                                        </div>
                                        <i class="fas fa-pills text-3xl opacity-80"></i>
                                    </div>
                                </div>
                                
                                <div class="stat-card bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h3 class="text-lg font-semibold">Stock</h3>
                                            <p class="text-3xl font-bold mt-2">0</p>
                                            <p class="text-green-100 text-sm mt-1">Items in Stock</p>
                                        </div>
                                        <i class="fas fa-boxes text-3xl opacity-80"></i>
                                    </div>
                                </div>
                                
                                <div class="stat-card bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h3 class="text-lg font-semibold">Customers</h3>
                                            <p class="text-3xl font-bold mt-2">0</p>
                                            <p class="text-purple-100 text-sm mt-1">Total Customers</p>
                                        </div>
                                        <i class="fas fa-users text-3xl opacity-80"></i>
                                    </div>
                                </div>
                                
                                <div class="stat-card bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h3 class="text-lg font-semibold">Revenue</h3>
                                            <p class="text-3xl font-bold mt-2">‚Çπ0</p>
                                            <p class="text-orange-100 text-sm mt-1">This Month</p>
                                        </div>
                                        <i class="fas fa-rupee-sign text-3xl opacity-80"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Firebase SDK with fallback handling -->
    <script>
        // Load Firebase with error handling
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // Load Firebase SDKs sequentially
        async function loadFirebase() {
            try {
                console.log('üî• Loading Firebase SDK...');
                
                await loadScript('https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js');
                console.log('‚úÖ firebase-app.js loaded');
                
                await loadScript('https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js');
                console.log('‚úÖ firebase-firestore.js loaded');
                
                await loadScript('https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js');
                console.log('‚úÖ firebase-auth.js loaded');
                
                // Initialize Firebase
                initializeApp();
                
            } catch (error) {
                console.error('üí• Failed to load Firebase SDK:', error);
                // Continue without Firebase
                initializeAppWithoutFirebase();
            }
        }

        // Initialize with Firebase
        function initializeApp() {
            const firebaseConfig = {
                apiKey: "AIzaSyARxCkcyB7ts0EWoq9x9G31xhIN6fpR9kk",
                authDomain: "sanj-healthcare-77e02.firebaseapp.com",
                projectId: "sanj-healthcare-77e02",
                storageBucket: "sanj-healthcare-77e02.firebasestorage.app",
                messagingSenderId: "710696156355",
                appId: "1:710696156355:web:13bcee177f46e3aebc7676",
                measurementId: "G-HDKXN3LZ7P"
            };

            try {
                // Initialize Firebase
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                    console.log('üéâ Firebase initialized successfully');
                }

                // Initialize services
                window.db = firebase.firestore();
                window.auth = firebase.auth();
                window.firebase = firebase;

                console.log('‚úÖ All Firebase services ready');
                
            } catch (error) {
                console.error('‚ùå Firebase initialization error:', error);
                initializeAppWithoutFirebase();
            }
        }

        // Initialize without Firebase (fallback)
        function initializeAppWithoutFirebase() {
            console.log('üö® Running in offline mode - Firebase not available');
            window.db = null;
            window.auth = null;
            window.firebase = null;
            
            // Show warning
            const header = document.querySelector('header');
            if (header) {
                const warning = document.createElement('div');
                warning.className = 'bg-yellow-50 border border-yellow-200 p-4 text-center';
                warning.innerHTML = `
                    <div class="flex items-center justify-center">
                        <i class="fas fa-exclamation-triangle text-yellow-400 mr-2"></i>
                        <span class="text-yellow-800">Running in offline mode. Some features may be limited.</span>
                    </div>
                `;
                header.parentNode.insertBefore(warning, header.nextSibling);
            }
        }

        // Start loading Firebase
        loadFirebase();
    </script>

    <!-- App Scripts -->
    <script src="js/navigation.js"></script>
    <script src="js/auth.js"></script>

    <script>
        // Set current date
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-IN', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üè• Sanj Healthcare App initialized');
        });
    </script>
</body>
</html>